<!DOCTYPE HTML>
<head>
    <script src = 'https://unpkg.com/jspsych@7.3.3'></script>  <!--This loads the jsPsych package-->
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script> <!--This loads in the plugin that shows text on the screen-->
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@1.1.2"></script> <!--This loads in the plugin that shows images and then records a response-->
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.2"></script> <!--This loads in the plugin that preloads your images for your participant-->
    <script src="https://unpkg.com/@jspsych/plugin-iat-image@1.1.2"></script>
    <link rel="stylesheet" href="https://unpkg.com/@jspsych/plugin-survey@0.1.1/css/survey.css">
    <link href="https://unpkg.com/jspsych@7.1.2/css/jspsych.css" rel="stylesheet" type="text/css" />
</head>
</html>

<script>
var jsPsych = initJsPsych({
      on_finish: function(){
        jsPsych.data.displayData();
      }
    });

var timeline = [];

var iat_instructions = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus:'<h1>Instructions:</h1> <p class = iat_inst> Place your left and right index fingers on the E and I keys. At the top of the screen are 2 categories. </p>' +
  '<p class = iat_inst>In the task, words and/or images appear in the middle of the screen. </p>' +
  '<p class = iat_inst>When the word/image belongs to the category on the left, press the E key as fast as you can.' +
  ' When it belongs to the category on the right, press the I key as fast as you can.</p>' +
  '<p class = iat_inst>If you make an error, a red X will appear. Correct errors by hitting the other key. Please try to go as fast as you can while making as few errors as possible.</p>' +
  '<p class = iat_inst>When you are ready, press [Space] to begin</p>',
  choices: " "
};


var iat_compat_right_procedure = {
  timeline :[ 
  {
  type: jsPsychIatImage,
  stimulus: jsPsych.timelineVariable('face'),
  stim_key_association: function(){
    if (jsPsych.timelineVariable('face').indexOf('B') > -1){
      return 'left';
    } else
    return 'right';
    },
  html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
  bottom_instructions: 'Remember, if you make an error an X will appear. Please press the other button to continue if this occurs',
  force_correct_key_press: true,
  display_feedback: true,
  trial_duration: 3000, //Only if display_feedback is false
  left_category_key: 'e',
  right_category_key: 'i',
  left_category_label: ['Black'],
  right_category_label: ['White'],
  response_ends_trial: true
  }],
  timeline_variables: [
  {face: 'img/IAT_img/B0jpg.jpg'},
  {face:'img/IAT_img/B1jpg.jpg'},
  {face:'img/IAT_img/B2jpg.jpg'},
  {face:'img/IAT_img/B3jpg.jpg'},
  {face:'img/IAT_img/B4jpg.jpg'},
  {face:'img/IAT_img/B5jpg.jpg'},
  {face:'img/IAT_img/B6jpg.jpg'},
  {face:'img/IAT_img/B7jpg.jpg'},
  {face:'img/IAT_img/B8jpg.jpg'},
  {face:'img/IAT_img/B9jpg.jpg'},
  {face:'img/IAT_img/W0jpg.jpg'},
  {face:'img/IAT_img/W1jpg.jpg'},
  {face:'img/IAT_img/W2jpg.jpg'},
  {face:'img/IAT_img/W3jpg.jpg'},
  {face:'img/IAT_img/W4jpg.jpg'},
  {face:'img/IAT_img/W5jpg.jpg'},
  {face:'img/IAT_img/W6jpg.jpg'},
  {face:'img/IAT_img/W7jpg.jpg'},
  {face:'img/IAT_img/W8jpg.jpg'},
  {face:'img/IAT_img/W9jpg.jpg'}
  ],
  randomize_order: true,

}

// random index in stimulus, then repeat 20 times. if stimulus index is the same 
// as other trial, then rechoose random index and rerun 

timeline.push(iat_instructions, iat_compat_right_procedure);

jsPsych.run(timeline);


</script>
